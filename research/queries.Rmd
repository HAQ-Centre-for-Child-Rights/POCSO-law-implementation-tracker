
```{r setup, include=FALSE}
knitr::opts_chunk$set(
	echo = FALSE,
	eval=FALSE,
	message = FALSE,
	warning = FALSE
)
source("../scripts/source_files.R")
```

```{r}
orders_judgement_data <- read_csv("datasets/case_order_judgment_details.csv")
```

# P39A usecase - Get all cases with sentence given under section 5/6 post april 2018 - Law was amended to provide death penalty to APSA case

## Download all judgements for selected case numbers
```{r get all judgements for p39A}
all_cinos <- c("ASNG010008652018", "ASSN010007342018", "HRAM010041132018", "HRAM010050262018", "HRAM010081672018", "HRFB010003372019", "HRFB010005462019", "HRFB010027452019", "HRFB010040292019", "HRFB010046382018", "HRFB010054602018", "HRFB010060592018", "HRFB010060642018", "HRFB010061582018", "HRFB010062532018", "HRFB010065712018", "HRFB010083672018", "HRFB010087912018", "HRFB010088612018", "HRFB010101352018", "HRFB010103122018", "HRFB010104062018", "HRFB010106262018", "HRFB010108912018", "HRFB010114512018", "HRFB010115852018", "HRFB010116392018", "HRFB010118992018", "HRFB010119612018", "HRFB010123082018", "HRFB010145192018", "HRFB010145852018", "HRFB010148492018", "HRFB010155702018", "HRFB010159692018", "HRFT010029202018", "HRFT010040452018", "HRGR010046782019", "HRHS010010492019", "HRHS010030202018", "HRHS010044212018", "HRHS010078522018", "HRHS010082592018", "HRHS010084362018", "HRHS010103392018", "HRHS010104422018", "HRJN010014652018", "HRJN010017092018", "HRJN010017642018", "HRJN010019952018", "HRJN010021392018", "HRJN010051062018", "HRJR010046382018", "HRJR010053792018", "HRKH010022132018", "HRKH010042602018", "HRKU010024342019", "HRPK010022322018", "HRPK010036082019", "HRPL010000952019", "HRPL010005682019", "HRPL010028382018", "HRPL010032202018", "HRRE010026362018", "HRRE010040882018", "HRRE010040892018", "HRRE010041562018", "HRRE010043742018", "HRRE010046662018", "HRRE010075662018", "HRRE010086902018", "HRRH010021632018", "HRRH010024232018", "HRRH010046152018", "HRRH010064212018", "HRRH010087072018", "HRSI010023372018", "HRSI010023872018", "HRSI010035602018", "HRSI010037972018", "HRSI010039422019", "HRSI010046862018", "HRSI010063412018", "HRSO010021642019", "HRSO010021652019", "HRSO010021662019", "HRSO010022592019", "HRSO010032272018", "HRSO010033372018", "HRSO010038682018", "HRSO010049542018", "HRSO010052122019", "HRSO010061942018", "HRSO010068452018", "HRSO010070282018", "HRSO010070292018", "HRSO010074192018", "HRSO010074742018", "HRSO010085412019", "HRSO010086742018", "HRSO010092822018", "HRSO010094572018", "HRSO010103132018", "HRSO010104342018", "ASNL010003762019", "ASCH010000362019", "ASDU100002572018", "ASDU100003342018", "ASSV010000412019", "ASSV010005512019", "ASDU010009192018")

judgement_path <- dbxSelect(
  con,
  glue('select cino, judgment_link from case_details where cino IN ({paste0("\\\'",all_cinos,"\\\'",collapse = ",")})')
)

for(i in 2:nrow(judgement_path)){
  tryCatch(download.file(judgement_path$judgment_link[[i]], destfile = glue::glue("/tmp/pocso_judgements/{judgement_path$cino[[i]]}.pdf"), method = 'wget'), error = function(e){
    message("Error Cino: ", paste(judgement_path$cino[[i]]))
  })
}

```


```{sql connection=con}
select judgment_link from case_details where cino = 'HRFB010003372019'
```


